<div class="displayWindow">
<div class="container">
  <h1>Welcome! <% if current_user != nil %><%= current_user.uname %> <% end %></h1>
  <% if current_user == nil %>
    <p>Register to get started.</p>
    <p>
      <%= link_to 'Register', new_user_registration_path, class: 'btn btn-primary btn-lg' %>
    </p>
  <% end %>      
</div>  
<div class="container">
<h4>Recent Popular Questions</h4>

<table class="table table-light table-striped">
  <thead>
    <th>Title</th>
    <th>Tags</th>
    <th>Upvotes</th>
    <th>Downvotes</th>
  </thead>
  <tbody>
  <% @mostUpVoted.each do |i| %>
    <% question = @questions[i] %>
    <% @upvotes = QVote.total_up_votes(question.id) %>
    <% @downvotes = QVote.total_down_votes(question.id) %>
    <tr scope="row"> 
      <td><%= question.title %></td>
      <td><%= question.all_tags %></td>    
      <td><%= @upvotes %></td>      
      <td><%= @downvotes %></td>

      <td><%= button_to '+1', upvote_question_path(question), method: :post%></td>
      <td><%= button_to '-1', downvote_question_path(question), method: :post %></td>
      <td><%= link_to 'Show', question_path(question) %></td>
      <% if question.user_id == current_user.id %>
      <td><%= link_to 'Edit', edit_question_path(question) %></td>
      <td><%= link_to 'Delete', question_path(question),
              method: :delete,
              data: { confirm: 'Are you sure you want to delete the Question ?' } %></td>
      <%end%>
    </tr>
  <% end %>
  </tbody>
</table>
</div>
<div class="container">
<h4>Recent Popular Articles</h4>

<table class="table table-light table-striped">
  <thead>
    <th>Title</th>
    <th>Tags</th>
    <th>Claps</th>
  <thead>
  <tbody>
  <% @mostClapped.each do |i| %>
    <% article = @articles[i] %>

    <tr scope = "row">
      <td><%= article.title %></td>
      <td><%= article.all_tags %></td>
      <td><%= Clap.total_claps(article.id) %></td>
      <td><%= link_to 'Show', article_path(article) %></td>
      <% if article.posted_by == current_user.id %>
        <td><%= link_to 'Edit', edit_article_path(article) %></td>
        <td><%= link_to 'Delete article', article_path(article),
                method: :delete,
                data: { confirm: 'Are you sure you want to delete the Article ?' } %></td>
      <%end%>
    </tr>
  <% end %>
</tbody>
</table>
</div>

</div>
</div>    



  

 

